# 紹介
これは、ペネトレーションで使用するツールの概要などをまとめた勉強用のメモになります。<br>

### 目次
- [nmap](#nmap)
- [Nikto](#Nikto)
- [Dirbuster](#Dirbuster)
- [enum4linux](#enum4linux)
- [Netcat](#Netcat)
- [Searchsploit](#Searchsploit)
- [OpenVAS](#OpenVAS)
- [Nessus](#Nessus)
- [Metasploit](#Metasploit)
- [Hydra](#Hydra)

<br>

## スキャニングと列挙 (Scanning and Enumeration)
目的: ターゲットの情報収集、開いているポートや使用しているサービス、バージョン情報などを特定します。<br><br>
## nmap
nmapは強力なネットワーク探索ツールとセキュリティ/ポートスキャナーです。
### 1.基本的な概念
- ターゲット: スキャン対象のホストやネットワーク。IPアドレスやドメイン名、CIDR形式などで指定できます。
- ポート: 通信を行うためのエンドポイント。TCP/UDPの2つの主要なプロトコルが存在します。
- スキャンタイプ: どのような方法でポートを調査するかを定義します。例えば、TCP SYNスキャン、TCP Connectスキャンなどがあります。<br><br>

### 2.基本的なコマンド
- 基本的なスキャン:<br>
このコマンドは、最も一般的な1,000のポートに対してTCP SYNスキャンを実行します。
```bash
nmap <target>
```

- 特定のポートをスキャン:<br>
これは、指定されたポート（この場合は22, 80, 443）に対してスキャンを実行します。
```bash
nmap -p 22,80,443 <target>
```

- 全ポートをスキャン:<br>
これは、1-65535の全てのポートをスキャンします。
```bash
nmap -p- <target>
```

- UDPスキャン:<br>
```bash
nmap -sU -p 53,67-69 <target>
```

- サービスバージョンの検出:<br>
```bash
nmap -sV <target>
```

- OSの検出:<br>
```bash
nmap -O <target>
```

- Aggressiveスキャン:<br>
OS検出、バージョン検出、スクリプトスキャン、tracerouteなどの複数のオプションを一度に実行します。
```bash
nmap -A <target>
```
<br>

### 3.その他のオプション
- スクリプトの使用:<br>
```bash
nmap --script=<script-name> <target>
```

- タイミングオプション:<br>
0から5までの値で、0は最も遅く、5は最も速いです。
```bash
nmap -T4 <target>
```

- 出力オプション:<br>
```bash
nmap -oN output.txt <target>
```
<br>


## Nikto
Niktoは、Webサーバの脆弱性をスキャンするオープンソースのツールです。CGIディレクトリ、オーバーフロウ、不適切に構成されたファイルなど、多くの項目に対してスキャンを行い、潜在的な脆弱性を検出します。

### 1.基本的な概念
- ホスト: スキャン対象のサーバやドメイン。
- プラグイン: Niktoに組み込まれている特定の検査を行うためのスクリプト。<br><br>

### 2.基本的なコマンド

- 基本的なスキャン:<br>
これにより、指定されたホストに対して基本的な脆弱性スキャンが実行されます。
```bash
nikto -h <target_host_or_IP>
```

- 特定のポートでスキャン:<br>
```bash
nikto -h <target_host_or_IP> -p <port>
```

- SSLを使用してスキャン:<br>
```bash
nikto -h <target_host_or_IP> -ssl
```

- プラグインを使用:<br>
```bash
nikto -h <target_host_or_IP> -Plugins <plugin_name>
```

- Virtual Hostのスキャン:<br>
```bash
nikto -h <target_host_or_IP> -vhost <vhost_name>
```

- 出力をファイルに保存:<br>
```bash
nikto -h <target_host_or_IP> -o output.txt
```
<br>


## Dirbuster
DirbusterはWebアプリケーションの隠れたディレクトリやファイルを発見するためのツールです。OWASPプロジェクトの一部として開発されています。

### 1.基本的な概念
- ターゲット: スキャン対象のWebサーバーのURL。
- ワードリスト: 予測するディレクトリやファイル名のリスト。<br><br>

### 2.基本的なコマンド(コマンドライン版)

- 基本的なスキャン:<br>
このコマンドは、デフォルトのワードリストを使用してターゲットのURLをスキャンします。
```bash
dirb http://<target_url> 
```

- 特定のワードリストでのスキャン:<br>
```bash
dirb http://<target_url> /path/to/wordlist.txt
```

- 拡張子を指定してのスキャン:<br>
```bash
dirb http://<target_url> -X .php,.html
```
<br>


## enum4linux
enum4linuxはLinux上で実行するホストに対する情報収集ツールです。特に、SambaやNetBIOSを介して、Windowsなどの情報や共有リソースを列挙するために使用されます。

### 1.基本的な概念
- ターゲット: 情報を収集したいホスト。IPアドレスで指定します。<br><br>

### 2.enum4linuxの使い方

- 全情報の列挙:<br>
指定されたターゲットに対して可能なすべての情報収集を試みます。
```bash
enum4linux <target_ip>
```

- ワードリスト:<br>
```bash
dirb http://<target_url> /path/to/wordlist.txt
```

- オプション:<br>
```bash
# ユーザアカウントの列挙
enum4linux -U <target_ip>

# システム共有の列挙
enum4linux -S <target_ip>

# OS情報の列挙
enum4linux -o <target_ip>

# パスワードポリシーの列挙
enum4linux -P <target_ip>

# グループ情報とメンバーシップの列挙
enum4linux -G <target_ip>

# リモート名とサービスの列挙
enum4linux -r <target_ip>

# リモートプロシージャコール(RPC)情報の列挙
enum4linux -R <target_ip>
```

- ログインの試行:<br>
```bash
enum4linux -u <username> -p <password> <target_ip>
```
<br>


## Netcat
netcatは、TCPおよびUDP接続を読み書きするシンプルなユーティリティです。ネットワークデバッグやセキュリティ調査において非常に人気があるようです。

### 1.基本的な概念
- リスニングモード: 特定のポートで待ち受けるモード。これを使うと、外部からの接続を待ち受けることができます。
- クライアントモード: 外部のホスト/ポートに接続するモード。<br><br>

### 2.基本的なコマンド
- TCP接続を開く:<br>
これは、指定されたホストとポートに対してTCP接続を試みます。
```bash
nc <target_host> <port>
```

- 特定のポートでリスニング:<br>
-l オプションはリスニングモードを意味し、-p オプションでリスニングするポートを指定します。
```bash
nc -l -p <port>
```

- UDP接続でのリスニング:<br>
```bash
nc -l -u -p <port>
```

- ファイル転送:<br>

受信側:
```bash
nc -l -p <port> > received_file.txt
```
送信側:
```bash
nc <target_host> <port> < input_file.txt
```
<br>

- バナー掴み:<br>
```bash
echo "" | nc <target_host> <port>
```

### 3.その他のオプション
- タイムアウトを設定:<br>
タイムアウト時間を秒単位で設定します。
```bash
nc -w <seconds> <target_host> <port>
```
<br>

## 脆弱性分析 (Vulnerability Analysis)
目的: ターゲットの情報収集、開いているポートや使用しているサービス、バージョン情報などを特定します。<br><br>
## Searchsploit
Searchsploitは、Exploit Database (EDB)のローカルコピーを簡単に検索できるコマンドラインユーティリティです。これを使用すると、特定のアプリケーションやサービスの既知の脆弱性やエクスプロイトを簡単に探すことができます。
### 1.基本的な使い方
1. 特定のソフトウェア/サービスのエクスプロイトを検索:<br>
例: searchsploit apache で Apache Webサーバーに関連するエクスプロイトを検索します。
```bash
searchsploit <software_name>
```

2. バージョンを指定して検索:<br>
例: searchsploit apache 2.2.8 で特定のバージョンのApacheに関連するエクスプロイトを検索します。
これは、指定されたポート（この場合は22, 80, 443）に対してスキャンを実行します。
```bash
searchsploit <software_name> <version>
```

3. 詳細を表示:<br>
エクスプロイトの詳細を確認する場合は、searchsploit -xを使用します。これにはパスやエクスプロイトIDが必要です。
```bash
searchsploit -x /path/to/exploit
```

4. エクスプロイトのコピー:<br>
特定のエクスプロイトを現在のディレクトリにコピーするには、以下のコマンドを使用します。
```bash
searchsploit -m /path/to/exploit
```
<br>


## OpenVAS
OpenVAS (Open Vulnerability Assessment System) は、ネットワークの脆弱性を検出するためのフリーかつオープンソースのソフトウェアスイートです。元々はNessusプロジェクトのフォークとしてスタートし、現在ではGreenbone Networksが管理しています。

### 1.主なコンポーネン
- OpenVAS Server: 脆弱性のスキャンを行う主要なコンポーネント。
- OpenVAS CLI: コマンドラインからOpenVAS Serverへのインターフェース。
- Greenbone Security Assistant (GSA): Webベースのインターフェース。
- OpenVAS Scanner: 実際のスキャンタスクを実行するコンポーネント。
- NVTs (Network Vulnerability Tests): 既知の脆弱性に関するデータベース。<br><br>

### 2.基本的な使い方(GUI)
1. セットアップ & 起動:
OpenVASのパッケージをインストールし、必要なサービスを起動します。

2. GSAへのログイン:
Webブラウザを開き、通常は`https://<your-server-ip>:9392`にアクセスしてGSAにログインします。

3. ターゲットの設定:
GSAの「ターゲット」セクションで新しいターゲットを設定します。IPアドレスや範囲、他の必要な情報を入力します。

4. タスクの作成:
「タスク」セクションで新しいタスクを作成し、先ほど設定したターゲットを選択します。

5. スキャンの開始:
作成したタスクを選択し、スキャンを開始します。

6. レポートの確認:
スキャンが完了すると、その結果は「レポート」セクションで確認できます。

### 3.基本的な使い方(コマンドライン)
1. openvas-setupの実行:
初回設定としてopenvas-setupを実行します。これにより、NVTsの更新やユーザの作成などが行われます。

2. openvas-startの実行:
openvas-startを実行してOpenVASサービスを起動します。

3. OpenVAS CLIを使用:
ompやopenvas-cliなどのコマンドを使用して、タスクの作成やスキャンの開始などの操作を行います

- OpenVAS CLI へのログイン:<br>
このコマンドで OpenVAS サーバにログインします。OpenVASに設定されているユーザー名とパスワードを入力します。
```bash
omp -u <username> -w <password>
```

- ターゲットの作成:<br>
`<Target Name>` には、ターゲットの名前を、`<target_ip>` には、スキャンするIPアドレスを入力します。
```bash
omp -u <username> -w <password> --xml='<create_target><name>Target Name</name><hosts>target_ip</hosts></create_target>'
```

- タスクの作成:<br>
`<Task Name>` にはタスクの名前を、`<config_id>` と `<target_id>` には、使用する設定とターゲットのIDをそれぞれ入力します。
```bash
omp -u <username> -w <password> --xml='<create_task><name>Task Name</name><config id="config_id"/><target id="target_id"/></create_task>'
```

- タスクの開始:<br>
指定したレポートIDのレポートを取得します。
```bash
omp -u <username> -w <password> --xml='<start_task task_id="task_id"/>'
```

- レポートの取得:<br>
指定したレポートIDのレポートを取得します。
```bash
omp -u <username> -w <password> --get-report report_id=<report_id>
```

- 全てのタスクのリストを取得:<br>
```bash
omp -u <username> -w <password> -G
```
<br>


## Nessus
Nessusは広く使われている商用の脆弱性評価ツールです。ライセンスが必要なツールで、無料版のNessus Essentialsや商用版など複数のバージョンがあります。

### 1.基本的な概念
- スキャンポリシー (Scan Policy): スキャンを実行する際のルールや設定を定義したもの。どのプラグインを使用するか、どのようなテストを行うかなどが含まれます。
- プラグイン: Nessusの脆弱性データベース。特定の脆弱性や問題点を検出するためのスクリプト。
- レポート: スキャンの結果をまとめたものです。脆弱性の詳細、リスクレベル、修正の推奨などが含まれます。

### 2.Nessusの使用方法
NessusはWebベースのインターフェースを持つため、コマンドラインよりもGUIを使用することが一般的のようです。以下は基本的な操作手順:

1. Nessusのインストールと起動: 公式サイトから適切なOS用のNessusをダウンロードしてインストール。インストール後、WebブラウザからNessusのインターフェースにアクセス。

2. アカウントの作成: 初回アクセス時にユーザーアカウントの作成。

3. プラグインの更新: Nessusを最新の状態に保つために、定期的にプラグインの更新を行う。

4. 新しいスキャンの作成:<br>
  "New Scan" をクリック。<br>
  スキャンのタイプ、ターゲットのIPアドレスや範囲、使用するポリシーなどを指定。

5. スキャンの実行: 作成したスキャンを実行する。

6. レポートの確認: スキャン完了後、結果としてのレポートを確認。脆弱性の詳細やリスクレベル、修正の推奨などを確認することができる。
<br>


## Metasploit
Metasploitはペネトレーションテスティングと脆弱性評価のための強力なフレームワークです。

### 1.基本的な概念
- モジュール: Metasploitの機能や攻撃手法をカプセル化したもの。例としてexploits, payloads, auxiliaries, post, encoders, nopsなどがあります。
- Exploit: 脆弱性を利用するためのコード。
- Payload: エクスプロイト成功後に実行されるコード。シェルやMeterpreterセッションなどが含まれます。
- Auxiliary: 脆弱性のスキャンやDoS攻撃などの補助的なタスクを実行するモジュール。
- Meterpreter: Metasploitの高度なペイロードの一つで、ターゲット上で多数の機能を提供するシェル環境。

### 2.Metasploitの使用方法
1. Metasploitの起動<br>
```bash
msfconsole
```

2. データベースの初期化と接続:<br>
Metasploitは、スキャン結果やセッション情報などを保存するためにPostgreSQLデータベースを利用します。
```bash
msfdb init
```

3. モジュールの検索:<br>
```bash
search <keyword>
```

4. モジュールの使用:<br>
```bash
use <module_path>
```

5. オプションの設定:<br>
```bash
set <option_name> <value>
```

6. エクスプロイトの実行:<br>
```bash
exploit
```

6. セッションの一覧表示:<br>
```bash
sessions -l
```

6. セッションへの接続:<br>
```bash
sessions -i <session_id>
```

### 3.その他コマンド
```bash
# バックグラウンド実行中のセッションの背景化
background

# 現在のモジュールのオプションの確認
show options

# 利用可能なペイロードの表示
show payloads

# ターゲットに関する情報の表示
show targets

# Metasploitの終了
exit
```
<br>


## Hydra
Hydraは、多くのプロトコルを対象にした高速なログインクラッカーの一つです。

### 1.基本的な概念
- 攻撃タイプ: Hydraはさまざまなログインクラック攻撃タイプをサポートしています。例として、辞書攻撃、ブルートフォース攻撃などがあります。
- ターゲット: 攻撃の対象となるホストやサービス。
- プロトコル: SSH, FTP, HTTP, POP3, Telnetなど、多数のプロトコルがサポートされています。

### 2.Hydraの使用方法
1. 基本的なブルートフォース攻撃 (例: SSH):<br>
ここで、`<username>`は対象のユーザー名、`<password_list>`は使用するパスワードリストのパス、`<target>`はターゲットのIPアドレスまたはホスト名です。
```bash
hydra -l <username> -P <password_list> <target> ssh
```

2. 基本的な辞書攻撃 (例: FTP):<br>
`-L`オプションを使ってユーザー名のリストを指定することで、複数のユーザー名に対して辞書攻撃を行うことができます。
```bash
hydra -L <user_list> -P <password_list> <target> ftp
```

3. 特定のポート番号を指定:<br>
```bash
hydra -l <username> -P <password_list> -s <port> <target> <service>
```

### 3.オプション
- -l / -L: 使用するユーザー名またはユーザーリストのパス。
- -p / -P: 使用するパスワードまたはパスワードリストのパス。
- -s: サービスのポート番号。
- -f: 1つのログインとパスワードの組み合わせが成功した場合に停止する。
- -e ns: パスワードとしてNULLとユーザー名を試す。
- -v / -V: 進行状況を表示 (大文字のVで詳細表示)。

<br>

